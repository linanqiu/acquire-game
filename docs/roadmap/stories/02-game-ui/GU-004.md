# GU-004: Tile Rack

## Metadata
- **Epic**: Game UI
- **Status**: `not-started`
- **Priority**: `critical`
- **Effort**: `M` (1-2 hours)
- **Dependencies**: GU-003

## Context

The player's hand of 6 tiles, displayed at the bottom of the player view. Each tile shows its coordinate and playability status. This is the primary interaction point during the tile placement phase.

## Requirements

1. Display 6 tiles in a horizontal row
2. Show playability indicators on each tile
3. Support tile selection
4. Handle different playability states
5. Bottom-anchored positioning for mobile (thumb-friendly)

## Acceptance Criteria

- [ ] Renders exactly 6 tiles
- [ ] Selected tile has visual emphasis
- [ ] Playable tiles: normal appearance
- [ ] Merger tiles: warning indicator (!!)
- [ ] Temporarily unplayable: dimmed with lock
- [ ] Permanently unplayable: crossed out
- [ ] Clicking a playable tile triggers onTileSelect
- [ ] Clicking disabled tile does nothing
- [ ] Disabled prop disables all interaction
- [ ] Responsive: works on mobile widths
- [ ] Unit tests for all states

## Implementation Notes

### File to Create

**frontend/src/components/game/TileRack.tsx**:
```tsx
import { Tile } from './Tile'
import styles from './TileRack.module.css'
import type { Coordinate } from '../../types/game'

type Playability = 'playable' | 'merger' | 'temp_unplayable' | 'perm_unplayable'

interface RackTile {
  coordinate: Coordinate
  playability: Playability
}

interface TileRackProps {
  tiles: RackTile[]
  selectedTile?: Coordinate
  onTileSelect: (coord: Coordinate) => void
  disabled?: boolean
}

function playabilityToState(
  playability: Playability,
  isSelected: boolean
): 'default' | 'selected' | 'disabled' | 'merger' | 'dead' {
  if (isSelected) return 'selected'
  switch (playability) {
    case 'playable': return 'default'
    case 'merger': return 'merger'
    case 'temp_unplayable': return 'disabled'
    case 'perm_unplayable': return 'dead'
  }
}

export function TileRack({
  tiles,
  selectedTile,
  onTileSelect,
  disabled = false,
}: TileRackProps) {
  return (
    <div className={styles.rack}>
      {tiles.map((tile) => {
        const isSelected = selectedTile === tile.coordinate
        const canInteract =
          !disabled &&
          (tile.playability === 'playable' || tile.playability === 'merger')

        return (
          <Tile
            key={tile.coordinate}
            coordinate={tile.coordinate}
            state={playabilityToState(tile.playability, isSelected)}
            onClick={canInteract ? () => onTileSelect(tile.coordinate) : undefined}
            size="lg"
            showLabel={true}
          />
        )
      })}
    </div>
  )
}
```

**frontend/src/components/game/TileRack.module.css**:
```css
.rack {
  display: flex;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3);
  background-color: var(--bg-secondary);
  border-top: 1px solid var(--border);
}

/* Responsive: ensure tiles fit on small screens */
@media (max-width: 400px) {
  .rack {
    gap: var(--space-1);
  }
}
```

### Playability States

| State | Visual | Interaction |
|-------|--------|-------------|
| `playable` | Normal | Clickable |
| `merger` | Yellow border, !! | Clickable (shows merger preview) |
| `temp_unplayable` | Dimmed, lock | Not clickable |
| `perm_unplayable` | Crossed out | Not clickable, offer replacement |

### Layout
```
+-----+ +-----+ +-----+ +-----+ +-----+ +-----+
| 1A  | | 3C  | | 6D  | | 7G  | | 9B  | |12I |
|     | | !!  | | *   | |     | | ðŸ”’  | | âœ•  |
+-----+ +-----+ +-----+ +-----+ +-----+ +-----+
```

## Verification

```bash
npm run test -- --grep "TileRack"

# Visual: render with various tile states
npm run dev
```

## Reference

- [Components Spec - TileRack](../../../ui/components.md#tilerack)
- [Storyboard - Tile Rack States](../../../ui/storyboard.md#tile-rack-states)
