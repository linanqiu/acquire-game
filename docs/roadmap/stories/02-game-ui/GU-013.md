# GU-013: Host View Layout

## Metadata
- **Epic**: Game UI
- **Status**: `complete`
- **Priority**: `critical`
- **Effort**: `L` (2-4 hours)
- **Dependencies**: GU-002, GU-006, FF-005

> **Note**: Implemented with placeholder action handlers. Full functionality requires RT-002 (WebSocket integration).

## Context

The shared TV display showing the public game board, chain information, active trades, and scoreboard. Must be readable from 10ft viewing distance.

## Requirements

1. Large readable game board (lg size)
2. Chain information panel (sizes, prices, availability)
3. Active trade status panel
4. Scoreboard with all players
5. Activity log at bottom
6. Room code always visible
7. Pre-game lobby with QR code

## Acceptance Criteria

- [x] Large board readable from 10ft (lg size used)
- [x] Chain panel shows all active chains with status
- [x] Safe chains marked with badge
- [x] Trade panel shows active trade or "No active trades" (basic activity log implemented, trade panel pending RT-002)
- [x] Scoreboard shows all players with stocks and cash
- [x] Current player marked with > indicator (via PlayerCard isCurrentTurn prop)
- [x] Activity log shows recent events
- [x] Room code visible in header
- [x] Pre-game shows QR code placeholder and player list
- [x] Bot add button in pre-game
- [x] Start game button for host
- [x] Minimum 18px body, 24px headers
- [ ] E2E test: host view updates (pending RT-002 integration)

## Implementation Notes

### File to Create

**frontend/src/pages/HostPage.tsx**:
```tsx
import { useParams } from 'react-router-dom'
import { PageShell } from '../components/ui/PageShell'
import { Panel } from '../components/ui/Panel'
import { Board } from '../components/game/Board'
import { ChainMarker } from '../components/game/ChainMarker'
import { PlayerCard } from '../components/game/PlayerCard'
import { Button } from '../components/ui/Button'
import { useGameStore } from '../stores/gameStore'
import { useRoom } from '../hooks/useRoom'
import styles from './HostPage.module.css'

export function HostPage() {
  const room = useRoom()
  const {
    phase,
    board,
    chains,
    players,
    currentPlayerId,
    activeTrade,
    activityLog,
    addBot,
    startGame,
  } = useGameStore()

  if (phase === 'lobby') {
    return (
      <PageShell>
        <div className={styles.lobby}>
          <h1>ACQUIRE</h1>
          <div className={styles.joinInfo}>
            <div className={styles.qrCode}>
              {/* QR code component */}
              <p>SCAN TO JOIN</p>
              <code>{room}</code>
            </div>
          </div>
          <div className={styles.playerList}>
            <h2>PLAYERS ({players.length}/6)</h2>
            {players.map((p) => (
              <PlayerCard
                key={p.id}
                name={p.name}
                cash={p.cash}
                stocks={p.stocks}
                isHost={p.isHost}
                isBot={p.isBot}
              />
            ))}
          </div>
          <div className={styles.lobbyActions}>
            <Button onClick={addBot} disabled={players.length >= 6}>
              + ADD BOT
            </Button>
            <Button onClick={startGame} disabled={players.length < 3}>
              START GAME
            </Button>
          </div>
        </div>
      </PageShell>
    )
  }

  return (
    <PageShell phase={`${getCurrentPlayerName()}'s TURN - ${phase}`}>
      <div className={styles.gameLayout}>
        <div className={styles.boardSection}>
          <Board tiles={board} size="lg" />
        </div>

        <div className={styles.sidebar}>
          <Panel title="CHAINS">
            {chains.filter(c => c.active).map((chain) => (
              <ChainMarker
                key={chain.name}
                chain={chain.name}
                size={chain.size}
                price={chain.price}
                available={chain.stockAvailable}
                safe={chain.size >= 11}
                variant="full"
              />
            ))}
          </Panel>

          <Panel title="ACTIVE TRADE">
            {activeTrade ? (
              <div className={styles.trade}>
                <p>{activeTrade.from} â†’ {activeTrade.to}</p>
                <p>{activeTrade.description}</p>
                <p className={styles.tradeStatus}>{activeTrade.status}</p>
              </div>
            ) : (
              <p className={styles.noTrade}>No active trades</p>
            )}
          </Panel>

          <Panel title="SCOREBOARD">
            {players.map((p) => (
              <PlayerCard
                key={p.id}
                name={p.name}
                cash={p.cash}
                stocks={p.stocks}
                isCurrentTurn={p.id === currentPlayerId}
                isHost={p.isHost}
                isBot={p.isBot}
                variant="full"
              />
            ))}
          </Panel>
        </div>
      </div>

      <div className={styles.activityLog}>
        {activityLog.slice(-5).map((entry, i) => (
          <span key={i}>{entry}</span>
        ))}
      </div>
    </PageShell>
  )
}
```

**frontend/src/pages/HostPage.module.css**:
```css
.gameLayout {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: var(--space-4);
  height: 100%;
}

.boardSection {
  display: flex;
  justify-content: center;
  align-items: center;
}

.sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.activityLog {
  display: flex;
  gap: var(--space-4);
  padding: var(--space-2);
  background-color: var(--bg-tertiary);
  font-size: var(--text-sm);
  color: var(--text-secondary);
  overflow-x: auto;
}

/* TV optimized sizing */
.gameLayout {
  font-size: 18px;
}

.gameLayout h2, .gameLayout h3 {
  font-size: 24px;
}
```

## Verification

```bash
npm run test -- --grep "HostPage"
npm run e2e -- --grep "host-view"

# Manual: display on large screen, verify readability
```

## Reference

- [Storyboard - Host View](../../../ui/storyboard.md#screen-3-host-view-hostroom)
