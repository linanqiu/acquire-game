# GU-009: Chain Selector

## Metadata
- **Epic**: Game UI
- **Status**: `complete`
- **Priority**: `high`
- **Effort**: `M` (1-2 hours)
- **Dependencies**: GU-005, FF-008

## Context

Grid for selecting a hotel chain. Used when founding a chain (player chooses which chain to create) and when choosing a merger survivor (in case of tie).

## Requirements

1. Display chains grouped by tier (Budget, Standard, Premium)
2. Show available/unavailable state for each chain
3. Indicate which chains are already on the board
4. Show stock availability
5. Selection highlight
6. Used within a Modal

## Acceptance Criteria

- [x] Chains grouped by tier with labels
- [x] Available chains are selectable
- [x] Chains already on board are grayed out
- [x] Selected chain has highlight
- [x] Stock availability shown per chain
- [x] Click triggers onSelect callback
- [x] Chains with 0 stock available still selectable (no founder bonus)
- [x] Keyboard navigation works
- [x] Unit tests for selection logic

## Implementation Notes

### File to Create

**frontend/src/components/game/ChainSelector.tsx**:
```tsx
import { ChainMarker } from './ChainMarker'
import styles from './ChainSelector.module.css'
import type { ChainName } from '../../types/game'

const CHAIN_TIERS: { name: string; chains: ChainName[] }[] = [
  { name: 'CHEAP TIER', chains: ['luxor', 'tower'] },
  { name: 'MEDIUM TIER', chains: ['american', 'festival', 'worldwide'] },
  { name: 'EXPENSIVE TIER', chains: ['continental', 'imperial'] },
]

interface ChainSelectorProps {
  availableChains: ChainName[]
  selectedChain?: ChainName
  onSelect: (chain: ChainName) => void
  stockAvailability: Record<ChainName, number>
}

export function ChainSelector({
  availableChains,
  selectedChain,
  onSelect,
  stockAvailability,
}: ChainSelectorProps) {
  return (
    <div className={styles.selector}>
      {CHAIN_TIERS.map((tier) => (
        <div key={tier.name} className={styles.tier}>
          <div className={styles.tierLabel}>{tier.name}</div>
          <div className={styles.chains}>
            {tier.chains.map((chain) => {
              const isAvailable = availableChains.includes(chain)
              const isSelected = selectedChain === chain
              const stockCount = stockAvailability[chain] ?? 25

              return (
                <button
                  key={chain}
                  className={`
                    ${styles.chainButton}
                    ${isAvailable ? styles.available : styles.unavailable}
                    ${isSelected ? styles.selected : ''}
                  `}
                  onClick={() => isAvailable && onSelect(chain)}
                  disabled={!isAvailable}
                  aria-pressed={isSelected}
                >
                  <ChainMarker chain={chain} variant="compact" />
                  <span className={styles.stock}>
                    {isAvailable
                      ? `${stockCount} stock avail`
                      : 'ACTIVE'}
                  </span>
                </button>
              )
            })}
          </div>
        </div>
      ))}
    </div>
  )
}
```

**frontend/src/components/game/ChainSelector.module.css**:
```css
.selector {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.tier {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.tierLabel {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  font-weight: var(--font-medium);
}

.chains {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.chainButton {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-3);
  background-color: var(--bg-tertiary);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  min-width: 100px;
  transition: all var(--duration-fast) var(--ease-default);
}

.available:hover {
  background-color: var(--bg-secondary);
  border-color: var(--text-secondary);
}

.unavailable {
  opacity: 0.5;
  cursor: not-allowed;
}

.selected {
  border-color: var(--text-accent);
  background-color: var(--bg-secondary);
}

.stock {
  font-size: var(--text-xs);
  color: var(--text-secondary);
}
```

### Layout
```
CHEAP TIER
+------------------+ +------------------+
| [Y] LUXOR        | | [Br] TOWER       |
| 25 stock avail   | | 25 stock avail   |
+------------------+ +------------------+

MEDIUM TIER
+-----------+ +-----------+ +-----------+
|[B]AMERICAN| |[P]FESTIVAL| |[G]WORLDWIDE|
| 25 avail  | | ACTIVE    | | 25 avail  |
+-----------+ +-----------+ +-----------+
```

## Verification

```bash
npm run test -- --grep "ChainSelector"

# Visual test with various states
npm run dev
```

## Reference

- [Storyboard - Chain Founding](../../../ui/storyboard.md#screen-2c-player-view---chain-founding)
- [Components Spec - ChainSelector](../../../ui/components.md#chainselector)
