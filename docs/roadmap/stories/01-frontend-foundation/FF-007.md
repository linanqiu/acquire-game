# FF-007: Input Components

## Metadata
- **Epic**: Frontend Foundation
- **Status**: `not-started`
- **Priority**: `high`
- **Effort**: `S` (30-60 minutes)
- **Dependencies**: FF-002

## Context

Create form input components: TextInput, Select, and RadioGroup. These are used in the lobby for name entry, room codes, and various game selections.

## Requirements

1. TextInput with label, placeholder, error state, maxLength
2. Select dropdown with options
3. RadioGroup for single selection from visible options
4. All inputs match dark theme design
5. Auto-capitalize option for TextInput (room codes)

## Acceptance Criteria

- [ ] TextInput renders with label, placeholder, value
- [ ] TextInput shows error message when provided
- [ ] TextInput respects maxLength
- [ ] TextInput autoCapitalize works for room codes
- [ ] Select renders options and handles selection
- [ ] RadioGroup renders options with selection state
- [ ] All inputs have focus states
- [ ] All inputs are keyboard accessible
- [ ] Unit tests for each component

## Implementation Notes

### Files to Create

**frontend/src/components/ui/TextInput.tsx**:
```tsx
interface TextInputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size'> {
  label?: string
  error?: string
  autoCapitalize?: boolean
}

export function TextInput({
  label,
  error,
  autoCapitalize,
  onChange,
  ...props
}: TextInputProps) {
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (autoCapitalize) {
      e.target.value = e.target.value.toUpperCase()
    }
    onChange?.(e)
  }

  return (
    <div className={styles.inputWrapper}>
      {label && <label className={styles.label}>{label}</label>}
      <input
        className={`${styles.input} ${error ? styles.error : ''}`}
        onChange={handleChange}
        {...props}
      />
      {error && <span className={styles.errorText}>{error}</span>}
    </div>
  )
}
```

**frontend/src/components/ui/Select.tsx**:
```tsx
interface Option {
  value: string
  label: string
}

interface SelectProps {
  options: Option[]
  value: string
  onChange: (value: string) => void
  placeholder?: string
  disabled?: boolean
}

export function Select({ options, value, onChange, placeholder, disabled }: SelectProps) {
  return (
    <select
      className={styles.select}
      value={value}
      onChange={(e) => onChange(e.target.value)}
      disabled={disabled}
    >
      {placeholder && <option value="">{placeholder}</option>}
      {options.map((opt) => (
        <option key={opt.value} value={opt.value}>
          {opt.label}
        </option>
      ))}
    </select>
  )
}
```

**frontend/src/components/ui/RadioGroup.tsx**:
```tsx
interface Option {
  value: string
  label: string
}

interface RadioGroupProps {
  name: string
  options: Option[]
  value: string
  onChange: (value: string) => void
}

export function RadioGroup({ name, options, value, onChange }: RadioGroupProps) {
  return (
    <div className={styles.radioGroup} role="radiogroup">
      {options.map((opt) => (
        <label key={opt.value} className={styles.radioLabel}>
          <input
            type="radio"
            name={name}
            value={opt.value}
            checked={value === opt.value}
            onChange={() => onChange(opt.value)}
            className={styles.radioInput}
          />
          <span className={styles.radioText}>{opt.label}</span>
        </label>
      ))}
    </div>
  )
}
```

### Shared Styles
**frontend/src/components/ui/inputs.module.css**:
```css
.input, .select {
  font-family: var(--font-primary);
  font-size: var(--text-md);
  padding: var(--space-2);
  background-color: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  width: 100%;
}

.input:focus, .select:focus {
  outline: none;
  border-color: var(--text-accent);
}

.input.error {
  border-color: var(--text-negative);
}

.label {
  display: block;
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-1);
}

.errorText {
  font-size: var(--text-xs);
  color: var(--text-negative);
  margin-top: var(--space-1);
}
```

## Testing Requirements

Create tests for each input component:

**src/components/ui/TextInput.test.tsx**:
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import { TextInput } from './TextInput'

describe('TextInput', () => {
  it('renders input element', () => {
    render(<TextInput />)
    expect(screen.getByRole('textbox')).toBeInTheDocument()
  })

  it('renders label when provided', () => {
    render(<TextInput label="Name" />)
    expect(screen.getByText('Name')).toBeInTheDocument()
  })

  it('renders placeholder', () => {
    render(<TextInput placeholder="Enter name" />)
    expect(screen.getByPlaceholderText('Enter name')).toBeInTheDocument()
  })

  it('shows error message when provided', () => {
    render(<TextInput error="Required field" />)
    expect(screen.getByText('Required field')).toBeInTheDocument()
  })

  it('applies error styling when error provided', () => {
    render(<TextInput error="Error" />)
    expect(screen.getByRole('textbox')).toHaveClass('error')
  })

  it('respects maxLength', () => {
    render(<TextInput maxLength={4} />)
    expect(screen.getByRole('textbox')).toHaveAttribute('maxLength', '4')
  })

  it('auto-capitalizes when autoCapitalize is true', () => {
    const onChange = vi.fn()
    render(<TextInput autoCapitalize onChange={onChange} />)
    fireEvent.change(screen.getByRole('textbox'), { target: { value: 'abcd' } })
    expect(onChange).toHaveBeenCalled()
  })

  it('calls onChange when value changes', () => {
    const onChange = vi.fn()
    render(<TextInput onChange={onChange} />)
    fireEvent.change(screen.getByRole('textbox'), { target: { value: 'test' } })
    expect(onChange).toHaveBeenCalled()
  })
})
```

**src/components/ui/Select.test.tsx**:
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import { Select } from './Select'

const options = [
  { value: 'a', label: 'Option A' },
  { value: 'b', label: 'Option B' },
]

describe('Select', () => {
  it('renders all options', () => {
    render(<Select options={options} value="" onChange={() => {}} />)
    expect(screen.getByText('Option A')).toBeInTheDocument()
    expect(screen.getByText('Option B')).toBeInTheDocument()
  })

  it('renders placeholder when provided', () => {
    render(<Select options={options} value="" onChange={() => {}} placeholder="Select..." />)
    expect(screen.getByText('Select...')).toBeInTheDocument()
  })

  it('calls onChange with selected value', () => {
    const onChange = vi.fn()
    render(<Select options={options} value="" onChange={onChange} />)
    fireEvent.change(screen.getByRole('combobox'), { target: { value: 'b' } })
    expect(onChange).toHaveBeenCalledWith('b')
  })

  it('is disabled when disabled prop is true', () => {
    render(<Select options={options} value="" onChange={() => {}} disabled />)
    expect(screen.getByRole('combobox')).toBeDisabled()
  })
})
```

**src/components/ui/RadioGroup.test.tsx**:
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import { RadioGroup } from './RadioGroup'

const options = [
  { value: 'yes', label: 'Yes' },
  { value: 'no', label: 'No' },
]

describe('RadioGroup', () => {
  it('renders all options', () => {
    render(<RadioGroup name="test" options={options} value="" onChange={() => {}} />)
    expect(screen.getByText('Yes')).toBeInTheDocument()
    expect(screen.getByText('No')).toBeInTheDocument()
  })

  it('has correct option selected', () => {
    render(<RadioGroup name="test" options={options} value="yes" onChange={() => {}} />)
    const yesRadio = screen.getByLabelText('Yes')
    expect(yesRadio).toBeChecked()
  })

  it('calls onChange when option selected', () => {
    const onChange = vi.fn()
    render(<RadioGroup name="test" options={options} value="" onChange={onChange} />)
    fireEvent.click(screen.getByLabelText('No'))
    expect(onChange).toHaveBeenCalledWith('no')
  })

  it('has radiogroup role for accessibility', () => {
    render(<RadioGroup name="test" options={options} value="" onChange={() => {}} />)
    expect(screen.getByRole('radiogroup')).toBeInTheDocument()
  })
})
```

**Minimum test coverage per component:**
- Rendering with all props
- Controlled value changes
- Error states (TextInput)
- Disabled states
- Keyboard accessibility

## Verification

```bash
npm run test -- --grep "TextInput\|Select\|RadioGroup"
npm run dev
# Test form interactions
```

## Reference

- [Components Spec - Form Components](../../../ui/components.md#form-components)
