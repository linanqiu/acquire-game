# FF-006: Button Component

## Metadata
- **Epic**: Frontend Foundation
- **Status**: `complete`
- **Priority**: `high`
- **Effort**: `S` (30-60 minutes)
- **Dependencies**: FF-002

## Context

Create a versatile Button component with multiple variants (primary, secondary, ghost, danger), sizes, and states (loading, disabled). Buttons are the primary interactive element.

## Requirements

1. Four style variants: primary, secondary, ghost, danger
2. Three sizes: sm, md, lg
3. Loading state with spinner
4. Disabled state
5. Full-width option
6. Proper focus states for accessibility

## Acceptance Criteria

- [x] All four variants render with correct styles
- [x] All three sizes work correctly
- [x] Loading state shows spinner and disables interaction
- [x] Disabled state has 50% opacity and no interaction
- [x] fullWidth prop expands button to container
- [x] Focus state has visible outline (accessibility)
- [x] Keyboard accessible (Enter/Space triggers click)
- [x] Unit tests for all variants and states

## Implementation Notes

### File to Create
**frontend/src/components/ui/Button.tsx**:

```tsx
import { forwardRef } from 'react'
import styles from './Button.module.css'
import { Spinner } from './Spinner'

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger'
  size?: 'sm' | 'md' | 'lg'
  loading?: boolean
  fullWidth?: boolean
}

export const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({
    variant = 'primary',
    size = 'md',
    loading = false,
    fullWidth = false,
    disabled,
    children,
    className,
    ...props
  }, ref) => {
    return (
      <button
        ref={ref}
        className={`
          ${styles.button}
          ${styles[variant]}
          ${styles[size]}
          ${fullWidth ? styles.fullWidth : ''}
          ${className || ''}
        `}
        disabled={disabled || loading}
        {...props}
      >
        {loading ? <Spinner size="sm" /> : children}
      </button>
    )
  }
)

Button.displayName = 'Button'
```

**frontend/src/components/ui/Button.module.css**:

```css
.button {
  font-family: var(--font-primary);
  font-weight: var(--font-medium);
  border: 1px solid transparent;
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  transition: all var(--duration-fast) var(--ease-default);
}

.button:focus-visible {
  outline: 2px solid var(--text-accent);
  outline-offset: 2px;
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Sizes */
.sm {
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-sm);
}

.md {
  padding: var(--space-2) var(--space-4);
  font-size: var(--text-md);
}

.lg {
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-lg);
}

/* Variants */
.primary {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  border-color: var(--border);
}

.primary:hover:not(:disabled) {
  background-color: #1e2a4a;
}

.secondary {
  background-color: transparent;
  color: var(--text-primary);
  border-color: var(--border);
}

.secondary:hover:not(:disabled) {
  background-color: var(--bg-tertiary);
}

.ghost {
  background-color: transparent;
  color: var(--text-secondary);
  border-color: transparent;
}

.ghost:hover:not(:disabled) {
  color: var(--text-primary);
  background-color: var(--bg-tertiary);
}

.danger {
  background-color: var(--text-negative);
  color: var(--bg-primary);
  border-color: var(--text-negative);
}

.danger:hover:not(:disabled) {
  background-color: #ff5252;
}

/* Full width */
.fullWidth {
  width: 100%;
}
```

### Spinner Component (included with Button)

**frontend/src/components/ui/Spinner.tsx**:
```tsx
import styles from './Spinner.module.css'

interface SpinnerProps {
  size?: 'sm' | 'md' | 'lg'
}

export function Spinner({ size = 'md' }: SpinnerProps) {
  return (
    <span className={`${styles.spinner} ${styles[size]}`} role="status">
      <span className="sr-only">Loading...</span>
    </span>
  )
}
```

**frontend/src/components/ui/Spinner.module.css**:
```css
.spinner {
  display: inline-block;
  border: 2px solid var(--border);
  border-top-color: var(--text-accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.sm { width: 12px; height: 12px; }
.md { width: 20px; height: 20px; }
.lg { width: 32px; height: 32px; }

@keyframes spin {
  to { transform: rotate(360deg); }
}
```

## Testing Requirements

Create `src/components/ui/Button.test.tsx`:

```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import { Button } from './Button'

describe('Button', () => {
  // Rendering tests
  it('renders children', () => {
    render(<Button>Click me</Button>)
    expect(screen.getByText('Click me')).toBeInTheDocument()
  })

  // Variant tests
  it.each(['primary', 'secondary', 'ghost', 'danger'] as const)(
    'renders %s variant with correct styles',
    (variant) => {
      render(<Button variant={variant}>Button</Button>)
      const button = screen.getByRole('button')
      expect(button).toHaveClass(variant)
    }
  )

  // Size tests
  it.each(['sm', 'md', 'lg'] as const)(
    'renders %s size with correct styles',
    (size) => {
      render(<Button size={size}>Button</Button>)
      const button = screen.getByRole('button')
      expect(button).toHaveClass(size)
    }
  )

  // State tests
  it('shows spinner when loading', () => {
    render(<Button loading>Button</Button>)
    expect(screen.queryByText('Button')).not.toBeInTheDocument()
    // Spinner should be visible (implementation-dependent)
  })

  it('is disabled when loading', () => {
    render(<Button loading>Button</Button>)
    expect(screen.getByRole('button')).toBeDisabled()
  })

  it('is disabled when disabled prop is true', () => {
    render(<Button disabled>Button</Button>)
    expect(screen.getByRole('button')).toBeDisabled()
  })

  it('has reduced opacity when disabled', () => {
    render(<Button disabled>Button</Button>)
    const button = screen.getByRole('button')
    // CSS class applies opacity: 0.5
    expect(button).toBeDisabled()
  })

  // fullWidth test
  it('applies fullWidth class when prop is true', () => {
    render(<Button fullWidth>Button</Button>)
    expect(screen.getByRole('button')).toHaveClass('fullWidth')
  })

  // Interaction tests
  it('calls onClick when clicked', () => {
    const onClick = vi.fn()
    render(<Button onClick={onClick}>Button</Button>)
    fireEvent.click(screen.getByRole('button'))
    expect(onClick).toHaveBeenCalledTimes(1)
  })

  it('does not call onClick when disabled', () => {
    const onClick = vi.fn()
    render(<Button onClick={onClick} disabled>Button</Button>)
    fireEvent.click(screen.getByRole('button'))
    expect(onClick).not.toHaveBeenCalled()
  })

  // Focus tests
  it('can receive focus', () => {
    render(<Button>Button</Button>)
    const button = screen.getByRole('button')
    button.focus()
    expect(button).toHaveFocus()
  })
})
```

**Minimum test coverage:**
- All 4 variants render correctly
- All 3 sizes render correctly
- Loading state shows spinner and disables button
- Disabled state has correct styles
- fullWidth prop works
- onClick fires correctly
- Keyboard accessibility

## Verification

```bash
npm run test -- --grep "Button"
npm run dev
# Visual verification - create a test page showing all variants
```

## Reference

- [Components Spec - Button](../../../ui/components.md#button)
- [Design System - Interactive States](../../../ui/design-system.md#interactive-states)
