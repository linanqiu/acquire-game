# FF-005: Layout Components

## Metadata
- **Epic**: Frontend Foundation
- **Status**: `complete`
- **Priority**: `high`
- **Effort**: `M` (1-2 hours)
- **Dependencies**: FF-002, FF-003

## Context

Create the core layout components: Header, PageShell, Card, and Panel. These establish the consistent page structure used across all screens.

## Requirements

1. Header component with logo, room code, cash display
2. PageShell component wrapping pages with header and footer slots
3. Card component for grouped content
4. Panel component for host view sidebars

## Acceptance Criteria

- [x] Header renders with configurable props (roomCode, cash, playerName)
- [x] PageShell provides consistent layout with header and optional footer
- [x] Card component with optional title, close button, footer actions
- [x] Panel component for sidebar sections
- [x] All components use design tokens
- [x] Components are responsive (mobile + desktop)
- [x] Unit tests for each component

## Implementation Notes

### Files to Create

**frontend/src/components/ui/Header.tsx**:
```tsx
interface HeaderProps {
  roomCode?: string
  cash?: number
  playerName?: string
  tilePool?: number | 'EMPTY'
}

export function Header({ roomCode, cash, playerName, tilePool }: HeaderProps) {
  return (
    <header className={styles.header}>
      <div className={styles.logo}>ACQUIRE</div>
      {roomCode && <div className={styles.roomCode}>Room: {roomCode}</div>}
      {cash !== undefined && <div className={styles.cash}>${cash.toLocaleString()}</div>}
      {tilePool !== undefined && (
        <div className={styles.tilePool}>
          [{typeof tilePool === 'number' ? tilePool : tilePool}]
        </div>
      )}
    </header>
  )
}
```

**frontend/src/components/ui/PageShell.tsx**:
```tsx
interface PageShellProps {
  phase?: string
  footer?: React.ReactNode
  children: React.ReactNode
}

export function PageShell({ phase, footer, children }: PageShellProps) {
  return (
    <div className={styles.shell}>
      <Header />
      {phase && <div className={styles.phase}>{phase}</div>}
      <main className={styles.main}>{children}</main>
      {footer && <footer className={styles.footer}>{footer}</footer>}
    </div>
  )
}
```

**frontend/src/components/ui/Card.tsx**:
```tsx
interface CardProps {
  title?: string
  onClose?: () => void
  footer?: React.ReactNode
  children: React.ReactNode
}

export function Card({ title, onClose, footer, children }: CardProps) {
  return (
    <div className={styles.card}>
      {(title || onClose) && (
        <div className={styles.cardHeader}>
          {title && <h3>{title}</h3>}
          {onClose && <button onClick={onClose}>×</button>}
        </div>
      )}
      <div className={styles.cardBody}>{children}</div>
      {footer && <div className={styles.cardFooter}>{footer}</div>}
    </div>
  )
}
```

**frontend/src/components/ui/Panel.tsx**:
```tsx
interface PanelProps {
  title: string
  children: React.ReactNode
}

export function Panel({ title, children }: PanelProps) {
  return (
    <aside className={styles.panel}>
      <h4 className={styles.panelTitle}>{title}</h4>
      <div className={styles.panelContent}>{children}</div>
    </aside>
  )
}
```

### CSS Module Structure
Each component should have a corresponding `.module.css` file using design tokens.

### Export from index
```tsx
// frontend/src/components/ui/index.ts
export { Header } from './Header'
export { PageShell } from './PageShell'
export { Card } from './Card'
export { Panel } from './Panel'
```

## Testing Requirements

Create tests for each layout component:

**src/components/ui/Header.test.tsx**:
```typescript
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'
import { Header } from './Header'

describe('Header', () => {
  it('renders logo', () => {
    render(<Header />)
    expect(screen.getByText('ACQUIRE')).toBeInTheDocument()
  })

  it('renders room code when provided', () => {
    render(<Header roomCode="ABCD" />)
    expect(screen.getByText(/ABCD/)).toBeInTheDocument()
  })

  it('renders cash when provided', () => {
    render(<Header cash={6000} />)
    expect(screen.getByText('$6,000')).toBeInTheDocument()
  })

  it('renders tile pool when provided', () => {
    render(<Header tilePool={42} />)
    expect(screen.getByText('[42]')).toBeInTheDocument()
  })

  it('renders EMPTY for empty tile pool', () => {
    render(<Header tilePool="EMPTY" />)
    expect(screen.getByText('[EMPTY]')).toBeInTheDocument()
  })
})
```

**src/components/ui/Card.test.tsx**:
```typescript
import { describe, it, expect, vi } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import { Card } from './Card'

describe('Card', () => {
  it('renders children', () => {
    render(<Card>Card content</Card>)
    expect(screen.getByText('Card content')).toBeInTheDocument()
  })

  it('renders title when provided', () => {
    render(<Card title="Card Title">Content</Card>)
    expect(screen.getByText('Card Title')).toBeInTheDocument()
  })

  it('calls onClose when close button clicked', () => {
    const onClose = vi.fn()
    render(<Card onClose={onClose}>Content</Card>)
    fireEvent.click(screen.getByText('×'))
    expect(onClose).toHaveBeenCalledTimes(1)
  })

  it('renders footer when provided', () => {
    render(<Card footer={<button>Action</button>}>Content</Card>)
    expect(screen.getByText('Action')).toBeInTheDocument()
  })
})
```

**src/components/ui/Panel.test.tsx**:
```typescript
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'
import { Panel } from './Panel'

describe('Panel', () => {
  it('renders title', () => {
    render(<Panel title="Panel Title">Content</Panel>)
    expect(screen.getByText('Panel Title')).toBeInTheDocument()
  })

  it('renders children', () => {
    render(<Panel title="Title">Panel content</Panel>)
    expect(screen.getByText('Panel content')).toBeInTheDocument()
  })
})
```

**src/components/ui/PageShell.test.tsx**:
```typescript
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'
import { PageShell } from './PageShell'

describe('PageShell', () => {
  it('renders children', () => {
    render(<PageShell>Page content</PageShell>)
    expect(screen.getByText('Page content')).toBeInTheDocument()
  })

  it('renders phase when provided', () => {
    render(<PageShell phase="Place Tile">Content</PageShell>)
    expect(screen.getByText('Place Tile')).toBeInTheDocument()
  })

  it('renders footer when provided', () => {
    render(<PageShell footer={<button>Footer</button>}>Content</PageShell>)
    expect(screen.getByText('Footer')).toBeInTheDocument()
  })
})
```

**Minimum test coverage per component:**
- Rendering with default props
- Rendering with all optional props
- Conditional rendering (when props present/absent)
- Callback functions fire correctly
- Responsive behavior (if applicable)

## Verification

```bash
npm run test -- --grep "Header\|PageShell\|Card\|Panel"
npm run dev
# Visual inspection of each component
```

## Reference

- [Components Spec - Layout](../../../ui/components.md#layout-components)
- [Design System](../../../ui/design-system.md)
