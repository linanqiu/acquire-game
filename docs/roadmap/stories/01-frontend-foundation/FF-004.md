# FF-004: Color System

## Metadata
- **Epic**: Frontend Foundation
- **Status**: `complete`
- **Priority**: `high`
- **Effort**: `S` (30-60 minutes)
- **Dependencies**: FF-002

## Context

Build on design tokens to create a complete color system with utility classes, chain color helpers, and ensure proper contrast ratios for accessibility.

## Requirements

1. Create color utility classes for text and backgrounds
2. Create chain-specific color utilities
3. Implement status colors (positive/negative)
4. Verify contrast ratios meet WCAG AA (4.5:1)
5. Add dark theme base styles to body/html

## Acceptance Criteria

- [x] Utility classes for all background colors
- [x] Utility classes for all text colors
- [x] Chain color utilities (bg and text)
- [x] Status color utilities (success, error)
- [x] Body has dark background by default
- [x] All text/background combos pass WCAG AA contrast

## Implementation Notes

### File to Create
**frontend/src/styles/colors.css**:

```css
/* Base dark theme */
html, body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Background utilities */
.bg-primary { background-color: var(--bg-primary); }
.bg-secondary { background-color: var(--bg-secondary); }
.bg-tertiary { background-color: var(--bg-tertiary); }

/* Text utilities */
.text-primary { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-accent { color: var(--text-accent); }
.text-positive { color: var(--text-positive); }
.text-negative { color: var(--text-negative); }

/* Chain background colors */
.bg-luxor { background-color: var(--chain-luxor); }
.bg-tower { background-color: var(--chain-tower); }
.bg-american { background-color: var(--chain-american); }
.bg-festival { background-color: var(--chain-festival); }
.bg-worldwide { background-color: var(--chain-worldwide); }
.bg-continental { background-color: var(--chain-continental); }
.bg-imperial { background-color: var(--chain-imperial); }

/* Chain text colors */
.text-luxor { color: var(--chain-luxor); }
.text-tower { color: var(--chain-tower); }
.text-american { color: var(--chain-american); }
.text-festival { color: var(--chain-festival); }
.text-worldwide { color: var(--chain-worldwide); }
.text-continental { color: var(--chain-continental); }
.text-imperial { color: var(--chain-imperial); }

/* Border utilities */
.border { border: 1px solid var(--border); }
.border-luxor { border-color: var(--chain-luxor); }
.border-tower { border-color: var(--chain-tower); }
.border-american { border-color: var(--chain-american); }
.border-festival { border-color: var(--chain-festival); }
.border-worldwide { border-color: var(--chain-worldwide); }
.border-continental { border-color: var(--chain-continental); }
.border-imperial { border-color: var(--chain-imperial); }

/* Orphan tile color */
.bg-orphan { background-color: #4a4a5a; }
.text-orphan { color: #4a4a5a; }
```

### Chain Color Reference

| Chain | Hex | Tier | Contrast on #1a1a2e |
|-------|-----|------|---------------------|
| Luxor | #c9a227 | Budget | 5.2:1 ✓ |
| Tower | #7a5c3d | Budget | 3.1:1 (use bold) |
| American | #5e7a8a | Standard | 3.8:1 (use bold) |
| Festival | #8a5e7a | Standard | 3.5:1 (use bold) |
| Worldwide | #5e8a6a | Standard | 4.1:1 ✓ |
| Continental | #8a3d3d | Premium | 3.0:1 (use bold) |
| Imperial | #3d5e8a | Premium | 3.2:1 (use bold) |

### Import in main.tsx
```typescript
import './styles/tokens.css'
import './styles/typography.css'
import './styles/colors.css'
```

## Testing Requirements

Create `src/styles/colors.test.ts`:

```typescript
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'

describe('Color System', () => {
  it('applies dark background to body', () => {
    const style = getComputedStyle(document.body)
    expect(style.backgroundColor).toBeTruthy()
  })

  it('utility classes apply correct colors', () => {
    render(
      <>
        <div className="bg-primary" data-testid="bg-primary">BG</div>
        <div className="text-positive" data-testid="text-positive">Text</div>
        <div className="bg-luxor" data-testid="bg-luxor">Chain</div>
      </>
    )

    expect(screen.getByTestId('bg-primary')).toHaveClass('bg-primary')
    expect(screen.getByTestId('text-positive')).toHaveClass('text-positive')
    expect(screen.getByTestId('bg-luxor')).toHaveClass('bg-luxor')
  })

  it('all chain color utilities exist', () => {
    const chains = ['luxor', 'tower', 'american', 'festival', 'worldwide', 'continental', 'imperial']
    chains.forEach(chain => {
      render(<div className={`bg-${chain}`} data-testid={`bg-${chain}`} />)
      expect(screen.getByTestId(`bg-${chain}`)).toHaveClass(`bg-${chain}`)
    })
  })
})
```

**Minimum test coverage:**
- Dark theme applied to body
- All background utility classes
- All text utility classes
- All chain color utilities (bg and text)

## Verification

```bash
npm run test -- --grep "Color System"
npm run dev
# Check body has dark background #1a1a2e
# All text is readable
```

## Reference

- [Design System - Color System](../../../ui/design-system.md#color-system)
