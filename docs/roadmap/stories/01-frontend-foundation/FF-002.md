# FF-002: Design Tokens

## Metadata
- **Epic**: Frontend Foundation
- **Status**: `complete`
- **Priority**: `critical`
- **Effort**: `S` (30-60 minutes)
- **Dependencies**: FF-001

## Context

Implement the CSS custom properties (design tokens) from `docs/ui/design-system.md`. These tokens provide the foundation for consistent colors, spacing, borders, and animations across all components.

## Requirements

1. Create global CSS file with all design tokens
2. Include background, text, and chain color palettes
3. Define spacing scale (4px base unit)
4. Define border radius and shadow tokens
5. Define animation timing and duration tokens

## Acceptance Criteria

- [x] All CSS variables from design-system.md are defined
- [x] Variables are scoped to `:root`
- [x] Colors include all 7 chain colors
- [x] Spacing scale from `--space-1` (4px) to `--space-12` (48px)
- [x] Variables are imported in main.tsx
- [x] A simple test component renders with correct token values

## Implementation Notes

### File to Create
`frontend/src/styles/tokens.css`

### Token Categories

**Colors - Background**:
```css
--bg-primary: #1a1a2e;
--bg-secondary: #16213e;
--bg-tertiary: #0f0f1a;
--border: #2a2a4a;
```

**Colors - Text**:
```css
--text-primary: #e8e8e8;
--text-secondary: #8888aa;
--text-accent: #ffffff;
--text-negative: #ff6b6b;
--text-positive: #6bff8a;
```

**Colors - Chains**:
```css
--chain-luxor: #c9a227;
--chain-tower: #7a5c3d;
--chain-american: #5e7a8a;
--chain-festival: #8a5e7a;
--chain-worldwide: #5e8a6a;
--chain-continental: #8a3d3d;
--chain-imperial: #3d5e8a;
```

**Spacing**:
```css
--space-1: 4px;
--space-2: 8px;
--space-3: 12px;
--space-4: 16px;
--space-5: 20px;
--space-6: 24px;
--space-8: 32px;
--space-10: 40px;
--space-12: 48px;
```

**Borders & Shadows**:
```css
--radius-sm: 2px;
--radius-md: 4px;
--radius-lg: 8px;
--radius-full: 9999px;
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
--shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
--shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);
```

**Animation**:
```css
--ease-default: cubic-bezier(0.4, 0, 0.2, 1);
--ease-in: cubic-bezier(0.4, 0, 1, 1);
--ease-out: cubic-bezier(0, 0, 0.2, 1);
--ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
--duration-fast: 100ms;
--duration-normal: 200ms;
--duration-slow: 400ms;
--duration-dramatic: 800ms;
```

### Import in main.tsx
```typescript
import './styles/tokens.css'
```

## Testing Requirements

Create `src/styles/tokens.test.ts`:

```typescript
import { describe, it, expect, beforeAll } from 'vitest'

describe('Design Tokens', () => {
  beforeAll(() => {
    // Load CSS into jsdom
    const link = document.createElement('link')
    link.rel = 'stylesheet'
    link.href = '/src/styles/tokens.css'
    document.head.appendChild(link)
  })

  it('defines all background color tokens', () => {
    const root = document.documentElement
    const style = getComputedStyle(root)
    expect(style.getPropertyValue('--bg-primary')).toBeTruthy()
    expect(style.getPropertyValue('--bg-secondary')).toBeTruthy()
    expect(style.getPropertyValue('--bg-tertiary')).toBeTruthy()
  })

  it('defines all chain color tokens', () => {
    const root = document.documentElement
    const style = getComputedStyle(root)
    const chains = ['luxor', 'tower', 'american', 'festival', 'worldwide', 'continental', 'imperial']
    chains.forEach(chain => {
      expect(style.getPropertyValue(`--chain-${chain}`)).toBeTruthy()
    })
  })

  it('defines spacing scale tokens', () => {
    const root = document.documentElement
    const style = getComputedStyle(root)
    ;[1, 2, 3, 4, 5, 6, 8, 10, 12].forEach(n => {
      expect(style.getPropertyValue(`--space-${n}`)).toBeTruthy()
    })
  })
})
```

**Minimum test coverage:**
- All CSS variable categories defined
- Values match design-system.md specification

## Verification

```bash
npm run test -- --grep "Design Tokens"
npm run dev
# Check browser DevTools > Elements > :root for all CSS variables
```

## Reference

- [Design System](../../../ui/design-system.md) - Full token specification

## Implementation Deviations

**Testing approach**: The suggested `<link>` element approach doesn't work in jsdom - it doesn't actually fetch/parse external CSS files. Instead:
- `tokens.test.ts` reads the CSS file directly via Node's `fs` module to verify token definitions
- `TokenSwatch.test.tsx` injects CSS via `<style>` element and uses `getComputedStyle` to verify runtime application

This achieves the same coverage goals through a working mechanism.
